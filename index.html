<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>ERA</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <!--external css-->
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/css/zabuto_calendar.css">
    <link rel="stylesheet" type="text/css" href="assets/js/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="assets/lineicons/style.css">    
    
    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/style-responsive.css" rel="stylesheet">
    <link href="assets/css/bootstrap-slider.css" rel="stylesheet">

    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body style="margin:20px 0px 16px 0px;">

    <!--Content -->
    <div >
        <form method="POST" action="#">
            <h3>Finalidade</h3>
            <select class="form-control" id="finalidade" onchange="optComprarTrespasse();">
                <option>Seleccionar</option>
                <option>Comprar</option>
                <option>Arrendar</option>
                <option>Trespasse</option>
            </select>
            <h3>Tipo de imóvel</h3>
            <select class="form-control">
                <option>Seleccionar</option>
                <option>Apartamentos</option>
                <option>Armazéns</option>
                <option>Escritórios</option>
                <option>Garagens</option>
                <option>Imóveis com negócio</option>
                <option>Lojas</option>
                <option>Moradias</option>
                <option>Prédios</option>
                <option>Quarto</option>
                <option>Quintas e herdades</option>
                <option>Terrenos</option>
            </select>
            <br/>
            <select class="form-control">
                <option>Nº de quartos</option>
                <option>1 Quarto</option>
                <option>2 Quartos</option>
                <option>3 Quartos</option>
                <option>4 Quartos</option>
                <option>5+ Quartos</option>
            </select>
            <br/>
            <!-- <input id="n_quartos" type="text" style="width: 90%" /> <br/> -->
            <!--
            <div class="form-inline">
             <input type="number" placeholder="ex: 150.000€" class="form-control" /> Até <input type="number" class="form-control" placeholder="ex: 160.000€" /> 
            </div>-->


            <!-- Boostrap-Slider: https://github.com/seiyria/bootstrap-slider -->
            <h3><div id="v_imovel">Preço do imóvel (<span id="min" >0€</span> : <span id="max">+1000000€</span>)</h3>
            <center>
                <div id="slider_change"><input style='width:95%;'  id='p_imovel' type='text'/></div>
            </center>
            <h3>Localização</h3>
            <select class="form-control" id="slc_distrito">
                <option>Distrito</option>
            </select>
            <br/>
            <select class="form-control" id="slc_concelho">
                <option>Concelho</option>
            </select>
            <br/>
            <select class="form-control" id="slc_freguesia">
                <option>Freguesia</option>
            </select>
            <br/>
            <select class="form-control"  id="slc_zona">
                <option>Zona</option>
            </select>

            <!-- <input  type="text" class="form-control" id="idmap"/>
            <div style="width:100%; height:200px" id="map"></div>
            -->
        <h3>Referência</h3>
        <input type="number" class="form-control">
        <!--
        <h3>Em Campanha</h3>
        <table>
        <tr><td>
            <label>
                <input type="checkbox">
                Leilões Online    
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Até 100% Financiamento   
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Alta Rentabilidade    
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Oportunidades   
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Casa com Garantia    
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Casa Aberta  
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Leilões 100[%] ERA 
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Golden Visa ERA
            </label>
        </td></tr>
        </table>
        <h3>Outras Características</h3>
          <table>
        <tr><td>
            <label>
                <input type="checkbox">
                Estacionamento    
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Jardim  
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Piscina  
            </label>
        </td></tr><tr><td>
            <label>
                <input type="checkbox">
                Empreendimentos  
            </label>
        </td></tr>
        </table>
        <br/>
        <input type="button" class="btn btn-primary" value="Pesquisar">

    </form>
        </center>
        -->

    <!-- End Of Content -->
    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/jquery-1.8.3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script src="assets/js/jquery.sparkline.js"></script>


    <!--common script for all pages-->
    <script src="assets/js/common-scripts.js"></script>
    
    <script type="text/javascript" src="assets/js/gritter/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="assets/js/gritter-conf.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap-slider.js"></script>
     <script type="text/javascript" src="assets/js/xml2json.js"></script> 
    <!-- SCRIPT SLIDER:  -->
    <script type="text/javascript">

        function renderSlider(total,step_value){


            var iSlider = $("#p_imovel").slider({ 
                id: "p_imovel", 
                min: 0, 
                max: total, 
                range: true, 
                value: [0, total], 
                step: step_value});
            

            iSlider.on("slide",function(slideEv){
                var valorMax = slideEv.value[1];
                $("#min").text(slideEv.value[0] + "€");
                if(valorMax == total){
                   $("#max").text("+" + valorMax + "€");
                }else{
                   $("#max").text(valorMax + "€");
                }
            });
      }
      renderSlider(1000000,5000);
   
        
    </script>
    <!-- SCRIPT SLIDER CHANGE-->
    <script type="text/javascript">
        function optComprarTrespasse(){
            var select = document.getElementById("finalidade");
            if(select.value == "Arrendar"){
                $("#max").text("+5000€");
                renderSlider(5000,250);
            }else{
                $("#max").text("+1000000€");
                renderSlider(1000000,5000);
            }
        }
    </script>

    <!-- SOAP TEST !-->
    <script type="text/javascript" src="assets/webservice.js">
        //var token = "2f30fa79-28c0-44c9-8adb-f244a85cef27";

        
    </script>
    <script type="text/javascript">
        var distritos = webservice.doPost("", "distritos");
        var concelhos;
        var freguesia;
        var zona;
        var slc_distrito = $("#slc_distrito");
        var slc_concelho = $("#slc_concelho");
        var slc_freguesia = $("#slc_freguesia");
        var slc_zona = $("#slc_zona");
        function update(vet, slc){
            if(vet.constructor === Array){
                vet.forEach(function(value,index, ar){
                    slc.append($('<option>',{
                        text : value.nome,
                        "value": value.id 
                    }));
                });
            }else{
                    slc.append($('<option>',{
                        text : vet.nome,
                        "value": vet.id 
                    }));
                }
        }
        console.log(distritos);
        
        update(distritos, slc_distrito);
  
        var x = 1;
        slc_distrito.change(function(){
            slc_concelho.empty();
            slc_freguesia.empty();
            slc_freguesia.html("<option>Freguesia</option>");
            slc_concelho.html("<option>Concelho</option>");
            concelhos = webservice.doPost(/*{"distrito" : slc_distrito.val()}*/ slc_distrito.val(), "concelhos").concelhos;
            update(concelhos,slc_concelho);
        });

        slc_concelho.change(function(){
            slc_freguesia.empty();
            slc_freguesia.html("<option>Freguesia</option>");
            slc_zona.empty();
            slc_zona.html("<option>Zona</option>");
            zona = webservice.doPost({"distrito" : slc_distrito.val(), "concelho" : slc_concelho.val()}, "getZonas");
            freguesia = webservice.doPost(slc_distrito.val()+ "/" + slc_concelho.val(), "freguesias").freguesias;
            if(freguesia){
                update(freguesia,slc_freguesia);
            }
            if(zona){
                update(zona,slc_zona); 
            }
        });



    </script>


  </body>
</html>
